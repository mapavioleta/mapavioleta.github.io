<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mapa da Viol√™ncia contra Pessoas Trans - 2025 üè≥Ô∏è‚Äç‚ößÔ∏è</title>
    
    <link rel="icon" href="favicon.ico" sizes="any"> 
    <link rel="apple-touch-icon" href="apple-touch-icon.png">
    <meta name="theme-color" content="#9b59b6">
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="manifest" href="manifest.json">
    
    <style>
        /* Vari√°veis CSS para cores e estilos */
        :root {
            --color-primary: #9b59b6;
            --color-primary-dark: #8e44ad;
            --color-secondary: #3498db;
            --color-danger: #e74c3c;
            --color-warning: #f39c12;
            --color-info: #3498db;
            --color-success: #2ecc71;
            --color-dark: #2c3e50;
            --color-light: #ecf0f1;
            --color-gray: #95a5a6;
            --color-white: #ffffff;
            --color-background: #f8f9fa;
            --color-text: #333333;
            --color-text-light: #666666;
            
            --border-radius: 8px;
            --box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
            
            --font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            --font-size-xs: 0.75rem;
            --font-size-sm: 0.875rem;
            --font-size-base: 1rem;
            --font-size-lg: 1.125rem;
            --font-size-xl: 1.25rem;
            --font-size-2xl: 1.5rem;
            --font-size-3xl: 1.875rem;
        }

        /* Reset e estilos base */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: var(--font-family);
            font-size: var(--font-size-base);
            line-height: 1.6;
            color: var(--color-text);
            background-color: var(--color-background);
        }

        .pagina-mapa-violeta {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Container principal */
        .app-main-container {
            flex: 1;
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem;
        }

        /* Cabe√ßalho */
        .mapa-violeta-header-secao {
            text-align: center;
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: linear-gradient(135deg, var(--color-primary), var(--color-primary-dark));
            color: var(--color-white);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
        }

        .mapa-violeta-header-secao h1 {
            font-size: var(--font-size-2xl);
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .subtitulo-mapa {
            font-size: var(--font-size-lg);
            opacity: 0.95;
            margin-bottom: 0.5rem;
        }

        /* Painel de informa√ß√µes */
        .info-painel {
            background-color: var(--color-warning);
            color: var(--color-dark);
            padding: 1.25rem;
            border-radius: var(--border-radius);
            margin-bottom: 2rem;
            box-shadow: var(--box-shadow);
        }

        .info-painel h3 {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.75rem;
            font-size: var(--font-size-lg);
        }

        /* Estat√≠sticas */
        .estatisticas {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .estatistica-item {
            background-color: var(--color-white);
            padding: 1.5rem 1rem;
            border-radius: var(--border-radius);
            text-align: center;
            box-shadow: var(--box-shadow);
            transition: var(--transition);
        }

        .estatistica-item:hover {
            transform: translateY(-5px);
        }

        .estatistica-numero {
            display: block;
            font-size: var(--font-size-3xl);
            font-weight: bold;
            color: var(--color-primary);
            margin-bottom: 0.5rem;
        }

        .estatistica-label {
            font-size: var(--font-size-sm);
            color: var(--color-text-light);
        }

        /* Filtros */
        .filtros-container {
            background-color: var(--color-white);
            padding: 1.5rem;
            border-radius: var(--border-radius);
            margin-bottom: 2rem;
            box-shadow: var(--box-shadow);
        }

        .filtros-container h4 {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
            color: var(--color-dark);
        }

        .filtros-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .filtro-grupo {
            display: flex;
            flex-direction: column;
        }

        .filtro-grupo label {
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--color-text);
        }

        .filtro-grupo select {
            padding: 0.75rem;
            border: 1px solid var(--color-gray);
            border-radius: var(--border-radius);
            font-size: var(--font-size-base);
            background-color: var(--color-white);
            transition: var(--transition);
        }

        .filtro-grupo select:focus {
            outline: none;
            border-color: var(--color-primary);
            box-shadow: 0 0 0 3px rgba(155, 89, 182, 0.2);
        }

        .filtro-acoes {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        /* Bot√µes */
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: var(--border-radius);
            font-size: var(--font-size-base);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            text-decoration: none;
        }

        .btn--primary {
            background-color: var(--color-primary);
            color: var(--color-white);
        }

        .btn--primary:hover {
            background-color: var(--color-primary-dark);
        }

        .btn--secondary {
            background-color: var(--color-gray);
            color: var(--color-white);
        }

        .btn--secondary:hover {
            background-color: #7f8c8d;
        }

        /* Mapa */
        #map {
            height: 500px;
            width: 100%;
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--box-shadow);
            margin-bottom: 2rem;
        }

        /* Legenda */
        .legenda {
            background-color: var(--color-white);
            padding: 1.5rem;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
        }

        .legenda h4 {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
            color: var(--color-dark);
        }

        .legenda-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 0.75rem;
        }

        .legenda-cor {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 2px solid var(--color-white);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        /* Popup do mapa */
        .popup-marker-details {
            max-width: 300px;
        }

        .popup-marker-details h4 {
            color: var(--color-primary);
            margin-bottom: 0.5rem;
            border-bottom: 1px solid var(--color-light);
            padding-bottom: 0.5rem;
        }

        .popup-marker-details p {
            margin-bottom: 0.5rem;
            font-size: var(--font-size-sm);
        }

        .popup-marker-details .fonte {
            margin-top: 0.75rem;
            padding-top: 0.75rem;
            border-top: 1px solid var(--color-light);
            font-style: italic;
            color: var(--color-text-light);
        }

        /* Responsividade */
        @media (max-width: 768px) {
            .app-main-container {
                padding: 0.5rem;
            }
            
            .mapa-violeta-header-secao h1 {
                font-size: var(--font-size-xl);
                flex-direction: column;
                gap: 0.25rem;
            }
            
            .subtitulo-mapa {
                font-size: var(--font-size-base);
            }
            
            .estatisticas {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .filtros-grid {
                grid-template-columns: 1fr;
            }
            
            .filtro-acoes {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
                justify-content: center;
            }
            
            #map {
                height: 400px;
            }
        }

        @media (max-width: 480px) {
            .estatisticas {
                grid-template-columns: 1fr;
            }
            
            .mapa-violeta-header-secao {
                padding: 1rem;
            }
            
            .info-painel, .filtros-container, .legenda {
                padding: 1rem;
            }
            
            #map {
                height: 350px;
            }
        }

        /* Acessibilidade */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        /* Foco vis√≠vel para acessibilidade */
        button:focus-visible,
        select:focus-visible {
            outline: 2px solid var(--color-primary);
            outline-offset: 2px;
        }

        /* Modo escuro (opcional) */
        @media (prefers-color-scheme: dark) {
            :root {
                --color-background: #1a1a1a;
                --color-text: #e0e0e0;
                --color-text-light: #a0a0a0;
                --color-white: #2d2d2d;
                --color-light: #3a3a3a;
                --color-dark: #f0f0f0;
            }
            
            .filtro-grupo select {
                background-color: #3a3a3a;
                color: var(--color-text);
                border-color: #555;
            }
        }
    </style>
</head>
<body class="pagina-mapa-violeta">
    <div class="app-main-container">
        <main class="main-content-area">
            <section class="mapa-violeta-main-area">
                <div class="mapa-violeta-header-secao">
                    <h1><i class="fas fa-map-marked-alt"></i> Mapa da Viol√™ncia contra Pessoas Trans - 2025</h1>
                    <p class="subtitulo-mapa">Casos noticiados de viol√™ncia letal contra pessoas trans e travestis no Brasil<br>
                    <span style="font-size:0.95em; opacity:0.9;">
                        Dados compilados a partir de reportagens jornal√≠sticas - Atualizado em Novembro/2025
                    </span></p>
                </div>

                <div class="info-painel">
                    <h3><i class="fas fa-exclamation-triangle"></i> Importante - Subnotifica√ß√£o</h3>
                    <p>Estes casos representam apenas os <strong>noticiados pela imprensa em 2025</strong>. H√° significativa subnotifica√ß√£o. 
                    Segundo o <strong>Dossi√™ ANTRA 2024</strong>, foram registradas 122 mortes no ano anterior, indicando que muitos casos 
                    n√£o chegam √† m√≠dia. Este mapa visa dar visibilidade √† viol√™ncia transf√≥bica estrutural.</p>
                </div>

                <div class="estatisticas">
                    <div class="estatistica-item">
                        <span class="estatistica-numero">6</span>
                        <span class="estatistica-label">Casos Confirmados 2025</span>
                    </div>
                    <div class="estatistica-item">
                        <span class="estatistica-numero">5</span>
                        <span class="estatistica-label">Estados com Ocorr√™ncias</span>
                    </div>
                    <div class="estatistica-item">
                        <span class="estatistica-numero">122</span>
                        <span class="estatistica-label">Mortes em 2024 (ANTRA)</span>
                    </div>
                    <div class="estatistica-item">
                        <span class="estatistica-numero">96%</span>
                        <span class="estatistica-label">V√≠timas s√£o Mulheres Trans</span>
                    </div>
                </div>

                <div class="filtros-container">
                    <h4><i class="fas fa-filter"></i> Filtrar Casos</h4>
                    <div class="filtros-grid">
                        <div class="filtro-grupo">
                            <label for="filtro-tipo">Tipo de Caso:</label>
                            <select id="filtro-tipo">
                                <option value="todos">Todos os Tipos</option>
                                <option value="homicidio">Homic√≠dio Confirmado</option>
                                <option value="agressao">Morte ap√≥s Agress√£o</option>
                                <option value="investigacao">Em Investiga√ß√£o</option>
                            </select>
                        </div>
                        <div class="filtro-grupo">
                            <label for="filtro-estado">Estado:</label>
                            <select id="filtro-estado">
                                <option value="todos">Todos os Estados</option>
                                <option value="RJ">Rio de Janeiro</option>
                                <option value="MG">Minas Gerais</option>
                                <option value="GO">Goi√°s</option>
                                <option value="PE">Pernambuco</option>
                                <option value="SP">S√£o Paulo</option>
                            </select>
                        </div>
                    </div>
                    <div class="filtro-acoes">
                        <button class="btn btn--primary" id="btn-aplicar-filtros">
                            <i class="fas fa-search"></i> Aplicar Filtros
                        </button>
                        <button class="btn btn--secondary" id="btn-limpar-filtros">
                            <i class="fas fa-times-circle"></i> Limpar Filtros
                        </button>
                    </div>
                </div>
                
                <div id="map"></div>

                <div class="legenda">
                    <h4><i class="fas fa-key"></i> Legenda dos Marcadores</h4>
                    <div class="legenda-item">
                        <div class="legenda-cor" style="background-color: var(--color-danger);"></div>
                        <span><strong>Homic√≠dio Confirmado</strong> - Caso com confirma√ß√£o policial</span>
                    </div>
                    <div class="legenda-item">
                        <div class="legenda-cor" style="background-color: var(--color-warning);"></div>
                        <span><strong>Morte ap√≥s Agress√£o</strong> - Falecimento decorrente de viol√™ncia</span>
                    </div>
                    <div class="legenda-item">
                        <div class="legenda-cor" style="background-color: var(--color-info);"></div>
                        <span><strong>Caso em Investiga√ß√£o</strong> - Aguardando conclus√£o das autoridades</span>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // Dados dos casos de viol√™ncia contra pessoas trans - 2025
        const casosTrans2025 = [
            {
                id: 1,
                nome: "Danielly (Danny) Rocha",
                cidade: "Rio de Janeiro",
                estado: "RJ",
                data: "2025-05-03",
                tipo: "homicidio",
                descricao: "Ativista e cozinheira encontrada morta em sua resid√™ncia na Lapa. Caso investigado pela Pol√≠cia Civil. Danny era conhecida por seu ativismo na comunidade LGBTQIAP+ e trabalhava como cozinheira.",
                coordenadas: [-22.9068, -43.1729],
                fonte: "O Dia / CNN / Ag√™ncia Brasil",
                cor: "#e74c3c",
                icone: "üö®",
                idade: "32 anos"
            },
            {
                id: 2,
                nome: "Christina Maciel Oliveira",
                cidade: "Belo Horizonte",
                estado: "MG", 
                data: "2025-10-20",
                tipo: "homicidio",
                descricao: "Espancada at√© a morte em via p√∫blica. Agressor (ex-companheiro) preso em flagrante. Caso chocou a comunidade local e mobilizou movimentos sociais.",
                coordenadas: [-19.9167, -43.9345],
                fonte: "CNN Brasil, TJMG, MDHC",
                cor: "#e74c3c",
                icone: "üö®",
                idade: "28 anos"
            },
            {
                id: 3,
                nome: "Alice Martins Alves", 
                cidade: "Belo Horizonte",
                estado: "MG",
                data: "2025-11-09",
                tipo: "agressao",
                descricao: "Espancada na Savassi em 23/10/2025, internada e faleceu por complica√ß√µes. Investiga√ß√£o em curso. Alice era estudante universit√°ria.",
                coordenadas: [-19.9200, -43.9376],
                fonte: "CNN Brasil",
                cor: "#f39c12",
                icone: "‚ö†Ô∏è",
                idade: "24 anos"
            },
            {
                id: 4,
                nome: "V√≠tima em Rio Verde",
                cidade: "Rio Verde",
                estado: "GO",
                data: "2025-10-15",
                tipo: "homicidio",
                descricao: "Mulher trans perseguida e morta. Caso violento que envolveu tortura e levou √† pris√£o de suspeitos. A v√≠tima n√£o foi identificada pela fam√≠lia.",
                coordenadas: [-17.7450, -50.9313],
                fonte: "Metr√≥poles",
                cor: "#e74c3c", 
                icone: "üö®",
                idade: "N√£o informada"
            },
            {
                id: 5,
                nome: "V√≠tima em Belo Jardim",
                cidade: "Belo Jardim",
                estado: "PE",
                data: "2025-10-02", 
                tipo: "homicidio",
                descricao: "Mulher trans assassinada a tiros. Investiga√ß√£o em curso. Caso ocorreu em via p√∫blica e mobilizou a comunidade local.",
                coordenadas: [-8.3356, -36.4242],
                fonte: "Diario de Pernambuco",
                cor: "#e74c3c",
                icone: "üö®",
                idade: "N√£o informada"
            },
            {
                id: 6,
                nome: "Casos em S√£o Paulo",
                cidade: "S√£o Paulo",
                estado: "SP",
                data: "2025-04-15",
                tipo: "investigacao",
                descricao: "Agress√µes no centro de SP e casos de transfobia registrados em 2025. Inclui relatos de viol√™ncia f√≠sica e psicol√≥gica contra pessoas trans.",
                coordenadas: [-23.5505, -46.6333],
                fonte: "CNN Brasil",
                cor: "#3498db",
                icone: "üîç",
                idade: "V√°rias v√≠timas"
            }
        ];

        // Elementos DOM
        const mapElement = document.getElementById('map');
        const filtroTipo = document.getElementById('filtro-tipo');
        const filtroEstado = document.getElementById('filtro-estado');
        const btnAplicarFiltros = document.getElementById('btn-aplicar-filtros');
        const btnLimparFiltros = document.getElementById('btn-limpar-filtros');

        // Vari√°veis de estado
        let map;
        let markersLayer = L.layerGroup();
        let filtrosAtivos = {
            tipo: 'todos',
            estado: 'todos'
        };

        // Inicializar mapa
        function initMap() {
            map = L.map('map').setView([-15, -55], 4);
            
            // Adicionar tile layer
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '¬© OpenStreetMap contributors',
                maxZoom: 18
            }).addTo(map);

            // Adicionar layer group
            markersLayer.addTo(map);

            // Carregar todos os casos inicialmente
            carregarCasos(casosTrans2025);
        }

        // Carregar casos no mapa
        function carregarCasos(casos) {
            // Limpar marcadores anteriores
            markersLayer.clearLayers();

            casos.forEach(caso => {
                // Criar √≠cone customizado
                const customIcon = L.divIcon({
                    html: `<div style="
                        background-color: ${caso.cor}; 
                        width: 35px; 
                        height: 35px; 
                        border-radius: 50%; 
                        border: 3px solid white;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        font-size: 16px;
                        color: white;
                        box-shadow: 0 3px 8px rgba(0,0,0,0.5);
                        cursor: pointer;
                    ">${caso.icone}</div>`,
                    className: 'custom-trans-icon',
                    iconSize: [35, 35],
                    iconAnchor: [17, 17]
                });

                // Criar popup content
                const popupContent = `
                    <div class="popup-marker-details">
                        <h4>${caso.icone} ${caso.nome}</h4>
                        <p><strong>Cidade:</strong> ${caso.cidade} - ${caso.estado}</p>
                        <p><strong>Data:</strong> ${new Date(caso.data).toLocaleDateString('pt-BR')}</p>
                        <p><strong>Idade:</strong> ${caso.idade}</p>
                        <p><strong>Tipo:</strong> ${getTipoExtenso(caso.tipo)}</p>
                        <p><strong>Descri√ß√£o:</strong> ${caso.descricao}</p>
                        <div class="fonte">
                            <strong>Fonte:</strong> ${caso.fonte}
                        </div>
                    </div>
                `;

                // Adicionar marcador ao mapa
                const marker = L.marker(caso.coordenadas, { icon: customIcon })
                    .bindPopup(popupContent)
                    .addTo(markersLayer);
            });

            // Ajustar view do mapa para mostrar todos os marcadores
            if (casos.length > 0) {
                const group = new L.featureGroup(casos.map(caso => L.marker(caso.coordenadas)));
                map.fitBounds(group.getBounds().pad(0.1));
            }
        }

        // Filtrar casos
        function filtrarCasos() {
            const casosFiltrados = casosTrans2025.filter(caso => {
                const passaTipo = filtrosAtivos.tipo === 'todos' || caso.tipo === filtrosAtivos.tipo;
                const passaEstado = filtrosAtivos.estado === 'todos' || caso.estado === filtrosAtivos.estado;
                
                return passaTipo && passaEstado;
            });

            carregarCasos(casosFiltrados);
            
            // Atualizar estat√≠stica
            atualizarEstatistica(casosFiltrados.length);
        }

        // Atualizar estat√≠stica
        function atualizarEstatistica(total) {
            const estatisticaElement = document.querySelector('.estatistica-item:first-child .estatistica-numero');
            if (estatisticaElement) {
                estatisticaElement.textContent = total;
            }
        }

        // Helper function para tipo extenso
        function getTipoExtenso(tipo) {
            const tipos = {
                'homicidio': 'Homic√≠dio Confirmado',
                'agressao': 'Morte ap√≥s Agress√£o',
                'investigacao': 'Caso em Investiga√ß√£o'
            };
            return tipos[tipo] || tipo;
        }

        // Event Listeners
        btnAplicarFiltros.addEventListener('click', () => {
            filtrosAtivos.tipo = filtroTipo.value;
            filtrosAtivos.estado = filtroEstado.value;
            filtrarCasos();
        });

        btnLimparFiltros.addEventListener('click', () => {
            filtroTipo.value = 'todos';
            filtroEstado.value = 'todos';
            filtrosAtivos.tipo = 'todos';
            filtrosAtivos.estado = 'todos';
            filtrarCasos();
        });

        // Inicializa√ß√£o
        initMap();

        console.log('üó∫Ô∏è Mapa da Viol√™ncia contra Pessoas Trans carregado com sucesso!');
        console.log(`üìä Total de casos: ${casosTrans2025.length}`);
        console.log('üéØ Use os filtros para explorar os dados espec√≠ficos');
    });
    </script>
</body>
</html>
